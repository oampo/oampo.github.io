!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var n=r(1),i=r(14).mat4,o=function(t){n.App.call(this,t),this.shiftAmount=10,this.frameCount=0,this.video=t.video,this.boundOnVideoLoad=this.onVideoLoad.bind(this),this.video.addEventListener("loadeddata",this.boundOnVideoLoad)};o.prototype=Object.create(n.App.prototype),o.prototype.constructor=o,o.prototype.onVideoLoad=function(){if(0!=this.video.videoWidth&&0!=this.video.videoHeight){this.video.removeEventListener("loadeddata",this.boundOnVideoLoad),this.videoTexture=new n.Texture(this.video.videoWidth,this.video.videoHeight);var t=document.getElementById("texture-vert").textContent,e=document.getElementById("texture-frag").textContent;this.videoRenderer=new n.FramebufferRenderer(this.video.videoWidth,this.video.videoHeight,t,e);var t=document.getElementById("shift-down-vert").textContent,e=document.getElementById("shift-down-frag").textContent;this.shiftRenderer=new n.FramebufferRenderer(this.video.videoWidth,this.video.videoHeight,t,e);var r=this.shiftAmount/this.video.videoHeight;this.shiftRenderer.shaderProgram.setUniform("uOffset",r);var t=document.getElementById("output-vert").textContent,e=document.getElementById("output-frag").textContent;this.sphereRenderer=new n.BasicRenderer(t,e),this.lineMesh=new n.RectMesh(this.video.videoWidth,this.shiftAmount,gl.STATIC_DRAW,null,null,gl.STATIC_DRAW),this.lineMesh.texCoordBuffer.setValues([0,.5,0,.5+r,1,.5,1,.5+r]),this.texMesh=new n.RectMesh(this.video.videoWidth,this.video.videoHeight,gl.STATIC_DRAW,null,null,gl.STATIC_DRAW);for(var o=[],a=[],s=[],u=50,f=100,c=0;u>c;c++)for(var h=c*Math.PI/u,l=(c+1)*Math.PI/u,d=0;f>d;d++){phi=d*Math.PI*2/f;var g=Math.sin(h)*Math.cos(phi),p=Math.sin(h)*Math.sin(phi),m=Math.cos(h);a.push(g,p,m),o.push(g,p,m),s.push(Math.asin(g)/Math.PI+.5,Math.asin(p)/Math.PI+.5),g=Math.sin(l)*Math.cos(phi),p=Math.sin(l)*Math.sin(phi),m=Math.cos(l),a.push(g,p,m),o.push(g,p,m),s.push(Math.asin(g)/Math.PI+.5,Math.asin(p)/Math.PI+.5)}this.sphereMesh=new n.Mesh(o.length/3,gl.TRIANGLE_STRIP,gl.STATIC_DRAW,null,gl.STATIC_DRAW,gl.STATIC_DRAW),this.sphereMesh.vertexBuffer.setValues(o),this.sphereMesh.normalBuffer.setValues(a),this.sphereMesh.texCoordBuffer.setValues(s),this.projectionMatrix=i.create(),this.modelviewMatrix=i.create(),i.lookAt(this.modelviewMatrix,[0,0,3.5],[0,0,0],[0,1,0]),this.sphereRenderer.setUniform("uModelviewMatrix",this.modelviewMatrix),this.normalMatrix=i.create(),i.invert(this.normalMatrix,this.modelviewMatrix),i.transpose(this.normalMatrix,this.normalMatrix),this.sphereRenderer.setUniform("uNormalMatrix",this.normalMatrix),this.orthoProjectionMatrix=i.create(),i.ortho(this.orthoProjectionMatrix,0,this.video.videoWidth,this.video.videoHeight,0,-1,1),this.videoRenderer.setUniform("uProjectionMatrix",this.orthoProjectionMatrix),this.shiftRenderer.setUniform("uProjectionMatrix",this.orthoProjectionMatrix),this.orthoModelviewMatrix=i.create(),i.identity(this.orthoModelviewMatrix),this.videoRenderer.setUniform("uModelviewMatrix",this.orthoModelviewMatrix),this.shiftRenderer.setUniform("uModelviewMatrix",this.orthoModelviewMatrix),window.requestAnimationFrame(this.draw.bind(this))}},o.prototype.draw=function(){if(window.requestAnimationFrame(this.draw.bind(this)),!(this.video.paused||this.video.readyState!=this.video.HAVE_FUTURE_DATA&&this.video.readyState!=this.video.HAVE_ENOUGH_DATA)){this.updateViewport(),i.perspective(this.projectionMatrix,Math.PI/4,this.canvas.width/this.canvas.height,.1,1e4),this.sphereRenderer.setUniform("uProjectionMatrix",this.projectionMatrix),gl.clear(gl.COLOR_BUFFER_BIT),this.videoTexture.loadFromExisting(this.video),this.videoTexture.begin(),this.videoRenderer.render(this.lineMesh),this.videoTexture.end(),this.videoRenderer.framebuffer.texture.begin(),this.sphereRenderer.setUniform("uFrameCount",this.frameCount),this.sphereRenderer.render(this.sphereMesh),this.shiftRenderer.render(this.texMesh),this.videoRenderer.framebuffer.texture.end();var t=this.shiftRenderer.framebuffer.texture,e=this.videoRenderer.framebuffer.texture;this.videoRenderer.framebuffer.attachTexture(t),this.shiftRenderer.framebuffer.attachTexture(e),this.frameCount+=1}},document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("video");t.muted=!0,t.volume=0;var e=document.getElementById("canvas");new o({video:t,canvas:e})})},function(t,e,r){e.App=r(2).App,e.Attribute=r(4).Attribute,e.BasicRenderer=r(5).BasicRenderer,e.Buffer=r(9).Buffer,e.Framebuffer=r(10).Framebuffer,e.FramebufferRenderer=r(12).FramebufferRenderer,e.MatrixStack=r(13).MatrixStack,e.Mesh=r(24).Mesh,e.RectMesh=r(25).RectMesh,e.Shader=r(7).Shader,e.ShaderProgram=r(6).ShaderProgram,e.Texture=r(11).Texture,e.Transformation=r(26).Transformation,e.Uniform=r(8).Uniform,e.glMatrix=r(14)},function(t,e,r){(function(t){var n=r(3).WebGLDebugUtils,i=function(e){e=e||{},this.canvas=e.canvas;var r=e.contextAttributes||{};try{t.gl=this.canvas.getContext("webgl",r)||this.canvas.getContext("experimental-webgl",e.contextAttributes),e.debug&&(gl=n.makeDebugContext(gl))}catch(i){gl=null}};i.prototype.updateViewport=function(){this.canvas.clientWidth&&this.canvas.clientHeight&&(this.canvas.width!=this.canvas.clientWidth||this.canvas.height!=this.canvas.clientHeight)&&(this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight),gl.viewport(0,0,this.canvas.width,this.canvas.height)},i.prototype.getCanvasPosition=function(){var t=vec2.create(),e=this.canvas;do vec2[0]+=e.offsetLeft,vec2[1]+=e.offsetTop;while(e=e.offsetParent);return t},e.App=i}).call(e,function(){return this}())},function(t,e){WebGLDebugUtils=function(){function t(t){if(null==d){d={},g={};for(var e in t)"number"==typeof t[e]&&(d[t[e]]=e,g[e]=t[e])}}function e(){if(null==d)throw"WebGLDebugUtils.init(ctx) not called"}function r(t){return e(),void 0!==d[t]}function n(t){e();var r=d[t];return void 0!==r?"gl."+r:"/*UNKNOWN WebGL ENUM*/ 0x"+t.toString(16)}function i(t,e,r,i){var o=l[t];if(void 0!==o){var o=o[e];if(void 0!==o&&o[r]){if("object"==typeof o[r]&&void 0!==o[r].enumBitwiseOr){for(var a=o[r].enumBitwiseOr,s=0,u=[],f=0;f<a.length;++f){var c=g[a[f]];0!==(i&c)&&(s|=c,u.push(n(c)))}return s===i?u.join(" | "):n(i)}return n(i)}}return null===i?"null":void 0===i?"undefined":i.toString()}function o(t,e){for(var r="",n=e.length,o=0;n>o;++o)r+=(0==o?"":", ")+i(t,n,o,e[o]);return r}function a(t,e,r){t.__defineGetter__(r,function(){return e[r]}),t.__defineSetter__(r,function(t){e[r]=t})}function s(e,r,o,u){function f(t,e){return function(){o&&o(e,arguments);var n=t[e].apply(t,arguments),i=u.getError();return 0!=i&&(c[i]=!0,r(i,e,arguments)),n}}u=u||e,t(e),r=r||function(t,e,r){for(var o="",a=r.length,s=0;a>s;++s)o+=(0==s?"":", ")+i(e,a,s,r[s]);h("WebGL error "+n(t)+" in "+e+"("+o+")")};var c={},l={};for(var d in e)if("function"==typeof e[d])if("getExtension"!=d)l[d]=f(e,d);else{var g=f(e,d);l[d]=function(){var t=g.apply(e,arguments);return s(t,r,o,u)}}else a(l,e,d);return l.getError=function(){for(var t in c)if(c.hasOwnProperty(t)&&c[t])return c[t]=!1,t;return e.NO_ERROR},l}function u(t){var e=t.getParameter(t.MAX_VERTEX_ATTRIBS),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r);for(var n=0;e>n;++n)t.disableVertexAttribArray(n),t.vertexAttribPointer(n,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(n,0);t.deleteBuffer(r);for(var i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),n=0;i>n;++n)t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null);for(t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.UNPACK_COLORSPACE_CONVERSION_WEBGL&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.BROWSER_DEFAULT_WEBGL),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT);t.getError(););}function f(t){function e(t){return"function"==typeof t?t:function(e){t.handleEvent(e)}}function r(t){var e=t.addEventListener;t.addEventListener=function(r,n,i){switch(r){case"webglcontextlost":T(n);break;case"webglcontextrestored":x(n);break;default:e.apply(t,arguments)}}}function n(){for(var t=Object.keys(b),e=0;e<t.length;++e)delete b[t]}function i(){++A,m||M==A&&t.loseContext()}function o(t,e){var r=t[e];return function(){if(i(),!m){var e=r.apply(t,arguments);return e}}}function s(){for(var t=0;t<v.length;++t){var e=v[t];e instanceof WebGLBuffer?h.deleteBuffer(e):e instanceof WebGLFramebuffer?h.deleteFramebuffer(e):e instanceof WebGLProgram?h.deleteProgram(e):e instanceof WebGLRenderbuffer?h.deleteRenderbuffer(e):e instanceof WebGLShader?h.deleteShader(e):e instanceof WebGLTexture&&h.deleteTexture(e)}}function f(t){return{statusMessage:t,preventDefault:function(){R=!0}}}function c(t){for(var e in t)"function"==typeof t[e]?l[e]=o(t,e):a(l,t,e);l.getError=function(){if(i(),!m)for(var t;t=h.getError();)b[t]=!0;for(var t in b)if(b[t])return delete b[t],t;return l.NO_ERROR};for(var r=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],n=0;n<r.length;++n){var s=r[n];l[s]=function(e){return function(){if(i(),m)return null;var r=e.apply(t,arguments);return r.__webglDebugContextLostId__=p,v.push(r),r}}(t[s])}for(var u=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"],n=0;n<u.length;++n){var s=u[n];l[s]=function(e){return function(){return i(),m?null:e.apply(t,arguments)}}(l[s])}for(var f=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"],n=0;n<f.length;++n){var s=f[n];l[s]=function(e){return function(){return i(),m?!1:e.apply(t,arguments)}}(l[s])}return l.checkFramebufferStatus=function(e){return function(){return i(),m?l.FRAMEBUFFER_UNSUPPORTED:e.apply(t,arguments)}}(l.checkFramebufferStatus),l.getAttribLocation=function(e){return function(){return i(),m?-1:e.apply(t,arguments)}}(l.getAttribLocation),l.getVertexAttribOffset=function(e){return function(){return i(),m?0:e.apply(t,arguments)}}(l.getVertexAttribOffset),l.isContextLost=function(){return m},l}var h,l,d=[],g=[],l={},p=1,m=!1,v=[],M=0,A=0,R=!1,E=0,b={};t.getContext=function(e){return function(){var r=e.apply(t,arguments);if(r instanceof WebGLRenderingContext){if(r!=h){if(h)throw"got different context";h=r,l=c(h)}return l}return r}}(t.getContext);var T=function(t){d.push(e(t))},x=function(t){g.push(e(t))};return r(t),t.loseContext=function(){if(!m){for(m=!0,M=0,++p;h.getError(););n(),b[h.CONTEXT_LOST_WEBGL]=!0;var e=f("context lost"),r=d.slice();setTimeout(function(){for(var n=0;n<r.length;++n)r[n](e);E>=0&&setTimeout(function(){t.restoreContext()},E)},0)}},t.restoreContext=function(){m&&g.length&&setTimeout(function(){if(!R)throw"can not restore. webglcontestlost listener did not call event.preventDefault";s(),u(h),m=!1,A=0,R=!1;for(var t=g.slice(),e=f("context restored"),r=0;r<t.length;++r)t[r](e)},0)},t.loseContextInNCalls=function(t){if(m)throw"You can not ask a lost contet to be lost";M=A+t},t.getNumCalls=function(){return A},t.setRestoreTimeout=function(t){E=t},t}var c=function(t){window.console&&window.console.log&&window.console.log(t)},h=function(t){window.console&&window.console.error?window.console.error(t):c(t)},l={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},d=null,g=null;return{init:t,mightBeEnum:r,glEnumToString:n,glFunctionArgToString:i,glFunctionArgsToString:o,makeDebugContext:s,makeLostContextSimulatingCanvas:f,resetToInitialState:u}}(),e.WebGLDebugUtils=WebGLDebugUtils},function(t,e){var r=function(t,e){this.size=t.size,this.type=t.type,this.name=t.name,this.location=gl.getAttribLocation(e,this.name),this.createFunctionHashes(),this.createSizeHash()};r.prototype.createFunctionHashes=function(){this.floatFunctions={},this.floatFunctions[gl.FLOAT]=gl.vertexAttrib1fv,this.floatFunctions[gl.FLOAT_VEC2]=gl.vertexAttrib2fv,this.floatFunctions[gl.FLOAT_VEC3]=gl.vertexAttrib3fv,this.floatFunctions[gl.FLOAT_VEC4]=gl.vertexAttrib4fv,this.matrixFunctions={},this.matrixFunctions[gl.FLOAT_MAT2]=gl.vertexAttrib2fv,this.matrixFunctions[gl.FLOAT_MAT3]=gl.vertexAttrib3fv,this.matrixFunctions[gl.FLOAT_MAT4]=gl.vertexAttrib4fv},r.prototype.createSizeHash=function(){this.sizes={},this.sizes[gl.FLOAT]=1,this.sizes[gl.FLOAT_VEC2]=2,this.sizes[gl.FLOAT_VEC3]=3,this.sizes[gl.FLOAT_VEC4]=4,this.sizes[gl.FLOAT_MAT2]=4,this.sizes[gl.FLOAT_MAT3]=9,this.sizes[gl.FLOAT_MAT4]=16},r.prototype.setValue=function(t){"number"==typeof t&&(t=[t]),this.floatFunctions[this.type]?this.setFloat(t):this.matrixFunctions[this.type]&&this.setMatrix(t)},r.prototype.setFloat=function(t){this.floatFunctions[this.type].apply(gl,[this.location,t])},r.prototype.setMatrix=function(t){this.matrixFunctions[this.type].apply(gl,[this.location,t])},r.prototype.setPointer=function(){gl.enableVertexAttribArray(this.location),gl.vertexAttribPointer(this.location,this.sizes[this.type],gl.FLOAT,!1,0,0)},e.Attribute=r},function(t,e,r){var n=r(6).ShaderProgram,i=function(t,e){this.shaderProgram=new n,this.shaderProgram.addShader(t,gl.VERTEX_SHADER),this.shaderProgram.addShader(e,gl.FRAGMENT_SHADER),this.shaderProgram.use()};i.prototype.render=function(t,e,r){this.shaderProgram.use(),t.associate(this.shaderProgram),t.render(e,r)},i.prototype.setUniform=function(t,e){this.shaderProgram.setUniform(t,e)},e.BasicRenderer=i},function(t,e,r){var n=r(7).Shader,i=r(4).Attribute,o=r(8).Uniform,a=function(){this.id=a.id,a.id+=1,this.program=null,this.shaders=[],this.uniforms={},this.attributes={},this.needRecompile=!0};a.id=0,a.prototype.addShader=function(t,e){var r=new n(t,e);return this.shaders.push(r),this.needRecompile=!0,r},a.prototype.removeShader=function(t){var e=this.shaders.indexOf(t);-1!=e&&this.shaders.splice(e,1),this.needRecompile=!0},a.prototype.createProgram=function(){this.program=gl.createProgram()},a.prototype.deleteProgram=function(){gl.deleteProgram(this.program)},a.prototype.attachShaders=function(){for(var t=0;t<this.shaders.length;t++){var e=this.shaders[t];gl.attachShader(this.program,e.getShader())}},a.prototype.getAttributes=function(){var t=gl.getProgramParameter(this.program,gl.ACTIVE_ATTRIBUTES);console.log("Program %d has %d active attributes",this.id,t);for(var e=0;t>e;e++){var r=gl.getActiveAttrib(this.program,e),n=new i(r,this.program);this.attributes[n.name]=n,console.log("Attribute %d: %s",e,n.name)}},a.prototype.getUniforms=function(){var t=gl.getProgramParameter(this.program,gl.ACTIVE_UNIFORMS);console.log("Program %d has %d active uniforms",this.id,t);for(var e=0;t>e;e++){var r=gl.getActiveUniform(this.program,e),n=new o(r,this.program);this.uniforms[n.name]=n,console.log("Uniform %d: %s",e,n.name)}},a.prototype.linkProgram=function(){return gl.linkProgram(this.program),gl.getProgramParameter(this.program,gl.LINK_STATUS)?!0:(console.error("Could not link shader program, %i",this.program),!1)},a.prototype.useProgram=function(){gl.useProgram(this.program)},a.prototype.use=function(){(this.needRecompile||a.activeProgram!=this.program)&&(this.needRecompile&&(null!==this.program&&this.deleteProgram(),this.createProgram(),this.attachShaders(),this.linkProgram(),this.getAttributes(),this.getUniforms(),this.needRecompile=!1),this.useProgram(),a.activeProgram=this.program)},a.prototype.getUniform=function(t){return this.uniforms[t]},a.prototype.setUniform=function(t,e){this.use(),this.uniforms[t].setValue(e)},a.prototype.getAttribute=function(t){return this.attributes[t]},a.prototype.setAttribute=function(t,e){this.use(),this.attributes[t].setValue(e)},a.activeProgram=null,e.ShaderProgram=a},function(t,e){var r=function(t,e){this.source=t,this.type=e,this.shader=gl.createShader(this.type),gl.shaderSource(this.shader,this.source),gl.compileShader(this.shader),gl.getShaderParameter(this.shader,gl.COMPILE_STATUS)||console.error("Could not compile shader ",this.name,"\n",gl.getShaderInfoLog(this.shader))};r.prototype.getShader=function(){return this.shader},e.Shader=r},function(t,e){var r=function(t,e){this.size=t.size,this.type=t.type,this.name=t.name,this.location=gl.getUniformLocation(e,this.name),this.createFunctionHashes()};r.prototype.createFunctionHashes=function(){this.floatFunctions={},this.floatFunctions[gl.FLOAT]=gl.uniform1fv,this.floatFunctions[gl.FLOAT_VEC2]=gl.uniform2fv,this.floatFunctions[gl.FLOAT_VEC3]=gl.uniform3fv,this.floatFunctions[gl.FLOAT_VEC4]=gl.uniform4fv,this.intFunctions={},this.intFunctions[gl.INT]=gl.uniform1iv,this.intFunctions[gl.INT_VEC2]=gl.uniform2iv,this.intFunctions[gl.INT_VEC3]=gl.uniform3iv,this.intFunctions[gl.INT_VEC4]=gl.uniform4iv,this.boolFunctions={},this.boolFunctions[gl.BOOL]=gl.uniform1iv,this.boolFunctions[gl.BOOL_VEC2]=gl.uniform2iv,this.boolFunctions[gl.BOOL_VEC3]=gl.uniform3iv,this.boolFunctions[gl.BOOL_VEC4]=gl.unform4iv,this.matrixFunctions={},this.matrixFunctions[gl.FLOAT_MAT2]=gl.uniformMatrix2fv,this.matrixFunctions[gl.FLOAT_MAT3]=gl.uniformMatrix3fv,this.matrixFunctions[gl.FLOAT_MAT4]=gl.uniformMatrix4fv,this.samplerFunctions={},this.samplerFunctions[gl.SAMPLER_2D]=gl.uniform1iv,this.samplerFunctions[gl.SAMPLER_CUBE]=gl.uniform1iv},r.prototype.setValue=function(t){"number"==typeof t&&(t=[t]),this.floatFunctions[this.type]?this.setFloat(t):this.intFunctions[this.type]?this.setInt(t):this.boolFunctions[this.type]?this.setBool(t):this.matrixFunctions[this.type]?this.setMatrix(t):this.samplerFunctions[this.type]&&this.setSampler(t)},r.prototype.setFloat=function(t){this.floatFunctions[this.type].apply(gl,[this.location,t])},r.prototype.setInt=function(t){this.intFunctions[this.type].apply(gl,[this.location,t])},r.prototype.setBool=function(t){this.boolFunctions[this.type].apply(gl,[this.location,t])},r.prototype.setMatrix=function(t){this.matrixFunctions[this.type].apply(gl,[this.location,!1,t])},r.prototype.setSampler=function(t){this.samplerFunctions[this.type].apply(gl,[this.location,t])},e.Uniform=r},function(t,e){var r=function(t,e,r){this.numVertices=t,this.itemSize=e,this.usage=r,this.buffer=gl.createBuffer(),this["null"](),this.array=new Float32Array(t*e)};r.prototype.getBuffer=function(){return this.buffer},r.prototype["null"]=function(){this.bind(),gl.bufferData(gl.ARRAY_BUFFER,this.numVertices*this.itemSize*4,this.usage)},r.prototype.setValues=function(t,e,r){if(e=e||0,void 0===r&&(r=t?t.length:this.array.length),0!=r){var n=this.array.subarray(e,r);t&&n.set(t),this.bind(),gl.bufferSubData(gl.ARRAY_BUFFER,0,n)}},r.prototype.bind=function(){gl.bindBuffer(gl.ARRAY_BUFFER,this.buffer)},r.prototype.unbind=function(){gl.bindBuffer(gl.ARRAY_BUFFER,null)},r.prototype.associate=function(t){this.bind(),t.setPointer(),this.unbind()},e.Buffer=r},function(t,e,r){var n=r(11).Texture,i=function(t,e){this.width=t,this.height=e,this.framebuffer=gl.createFramebuffer(),this.begin(),this.depthBuffer=gl.createRenderbuffer(),gl.bindRenderbuffer(gl.RENDERBUFFER,this.depthBuffer),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,t,e),gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,this.depthBuffer),gl.bindRenderbuffer(gl.RENDERBUFFER,null),this.end(),this.texture=new n(t,e),this.attachTexture(this.texture),this.begin(),gl.checkFramebufferStatus(gl.FRAMEBUFFER)!=gl.FRAMEBUFFER_COMPLETE&&console.error("Could not create framebuffer - error ",gl.checkFramebufferStatus(gl.FRAMEBUFFER)),this.end()};i.prototype.begin=function(){this.pushViewport(),gl.bindFramebuffer(gl.FRAMEBUFFER,this.framebuffer)},i.prototype.end=function(){gl.bindFramebuffer(gl.FRAMEBUFFER,null),this.popViewport()},i.prototype.attachTexture=function(t){this.texture=t,this.begin(),this.texture.begin(),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,this.texture.getTexture(),0),this.texture.end(),this.end()},i.prototype.clear=function(t){this.begin(),gl.clearColor(t[0],t[1],t[2],t[3]),gl.clear(gl.COLOR_BUFFER_BIT),this.end()},i.prototype.pushViewport=function(){this.storedViewport=gl.getParameter(gl.VIEWPORT),gl.viewport(0,0,this.width,this.height)},i.prototype.popViewport=function(){gl.viewport(this.storedViewport[0],this.storedViewport[1],this.storedViewport[2],this.storedViewport[3]),this.storedViewport=null},e.Framebuffer=i},function(t,e){var r=function(t,e){this.texture=gl.createTexture(),this.flipped=!1,this.bind(),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,t,e,0,gl.RGBA,gl.UNSIGNED_BYTE,null),this.end()};r.prototype.begin=function(t){t||(t=0),gl.activeTexture(gl.TEXTURE0+t),this.bind()},r.prototype.bind=function(){gl.bindTexture(gl.TEXTURE_2D,this.texture)},r.prototype.end=function(){gl.bindTexture(gl.TEXTURE_2D,null)},r.prototype.getTexture=function(){return this.texture},r.prototype.flipY=function(){this.flipped||(this.bind(),gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,!0),this.end(),this.flipped=!0)},r.prototype.loadFromFile=function(t){var e=new Image;e.src=t,e.onload=this.loadFromExisting.bind(this,e)},r.prototype.loadFromExisting=function(t){this.image=t,this.flipY(),this.bind(),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,this.image),this.end()},e.Texture=r},function(t,e,r){var n=r(10).Framebuffer,i=r(5).BasicRenderer,o=function(t,e,r,o){i.call(this,r,o),this.framebuffer=new n(t,e)};o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,r){this.shaderProgram.use(),t.associate(this.shaderProgram),this.framebuffer.begin(),t.render(e,r),this.framebuffer.end()},e.FramebufferRenderer=o},function(t,e,r){var n=r(14).mat4,i=function(){this.stack=[],this.matrix=n.create(),n.identity(this.matrix)};i.prototype.pushMatrix=function(){var t=n.clone(this.matrix);this.stack.push(t)},i.prototype.popMatrix=function(){this.stack.length>0&&(this.matrix=this.stack.pop())},e.MatrixStack=i},function(t,e,r){e.glMatrix=r(15),e.mat2=r(16),e.mat2d=r(17),e.mat3=r(18),e.mat4=r(19),e.quat=r(20),e.vec2=r(23),e.vec3=r(21),e.vec4=r(22)},function(t,e){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.setMatrixArrayType=function(t){GLMAT_ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},t.exports=r},function(t,e,r){var n=r(15),i={};i.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},i.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*o-i*n;return a?(a=1/a,t[0]=o*a,t[1]=-n*a,t[2]=-i*a,t[3]=r*a,t):null},i.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},i.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},i.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],f=r[2],c=r[3];return t[0]=n*s+o*u,t[1]=i*s+a*u,t[2]=n*f+o*c,t[3]=i*f+a*c,t},i.mul=i.multiply,i.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*s,t[1]=i*u+a*s,t[2]=n*-s+o*u,t[3]=i*-s+a*u,t},i.scale=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1];return t[0]=n*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t},i.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},i.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},i.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},t.exports=i},function(t,e,r){var n=r(15),i={};i.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=r*o-n*i;return u?(u=1/u,t[0]=o*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*s-o*a)*u,t[5]=(n*a-r*s)*u,t):null},i.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},i.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],f=r[0],c=r[1],h=r[2],l=r[3],d=r[4],g=r[5];return t[0]=n*f+o*c,t[1]=i*f+a*c,t[2]=n*h+o*l,t[3]=i*h+a*l,t[4]=n*d+o*g+s,t[5]=i*d+a*g+u,t},i.mul=i.multiply,i.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],f=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*f,t[1]=i*c+a*f,t[2]=n*-f+o*c,t[3]=i*-f+a*c,t[4]=s,t[5]=u,t},i.scale=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],f=r[0],c=r[1];return t[0]=n*f,t[1]=i*f,t[2]=o*c,t[3]=a*c,t[4]=s,t[5]=u,t},i.translate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],f=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=n*f+o*c+s,t[5]=i*f+a*c+u,t},i.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},i.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},t.exports=i},function(t,e,r){var n=r(15),i={};i.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},i.clone=function(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},i.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],f=e[7],c=e[8],h=c*a-s*f,l=-c*o+s*u,d=f*o-a*u,g=r*h+n*l+i*d;return g?(g=1/g,t[0]=h*g,t[1]=(-c*n+i*f)*g,t[2]=(s*n-i*a)*g,t[3]=l*g,t[4]=(c*r-i*u)*g,t[5]=(-s*r+i*o)*g,t[6]=d*g,t[7]=(-f*r+n*u)*g,t[8]=(a*r-n*o)*g,t):null},i.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],f=e[7],c=e[8];return t[0]=a*c-s*f,t[1]=i*f-n*c,t[2]=n*s-i*a,t[3]=s*u-o*c,t[4]=r*c-i*u,t[5]=i*o-r*s,t[6]=o*f-a*u,t[7]=n*u-r*f,t[8]=r*a-n*o,t},i.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],f=t[8];return e*(f*o-a*u)+r*(-f*i+a*s)+n*(u*i-o*s)},i.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],l=r[0],d=r[1],g=r[2],p=r[3],m=r[4],v=r[5],M=r[6],A=r[7],R=r[8];return t[0]=l*n+d*a+g*f,t[1]=l*i+d*s+g*c,t[2]=l*o+d*u+g*h,t[3]=p*n+m*a+v*f,t[4]=p*i+m*s+v*c,t[5]=p*o+m*u+v*h,t[6]=M*n+A*a+R*f,t[7]=M*i+A*s+R*c,t[8]=M*o+A*u+R*h,t},i.mul=i.multiply,i.translate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],l=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l*n+d*a+f,t[7]=l*i+d*s+c,t[8]=l*o+d*u+h,t},i.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],l=Math.sin(r),d=Math.cos(r);return t[0]=d*n+l*a,t[1]=d*i+l*s,t[2]=d*o+l*u,t[3]=d*a-l*n,t[4]=d*s-l*i,t[5]=d*u-l*o,t[6]=f,t[7]=c,t[8]=h,t},i.scale=function(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},i.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},i.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,f=r*a,c=n*a,h=n*s,l=i*a,d=i*s,g=i*u,p=o*a,m=o*s,v=o*u;return t[0]=1-h-g,t[3]=c-v,t[6]=l+m,t[1]=c+v,t[4]=1-f-g,t[7]=d-p,t[2]=l-m,t[5]=d+p,t[8]=1-f-h,t},i.normalFromMat4=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],f=e[7],c=e[8],h=e[9],l=e[10],d=e[11],g=e[12],p=e[13],m=e[14],v=e[15],M=r*s-n*a,A=r*u-i*a,R=r*f-o*a,E=n*u-i*s,b=n*f-o*s,T=i*f-o*u,x=c*p-h*g,F=c*m-l*g,y=c*v-d*g,_=h*m-l*p,P=h*v-d*p,w=l*v-d*m,L=M*w-A*P+R*_+E*y-b*F+T*x;
return L?(L=1/L,t[0]=(s*w-u*P+f*_)*L,t[1]=(u*y-a*w-f*F)*L,t[2]=(a*P-s*y+f*x)*L,t[3]=(i*P-n*w-o*_)*L,t[4]=(r*w-i*y+o*F)*L,t[5]=(n*y-r*P-o*x)*L,t[6]=(p*T-m*b+v*E)*L,t[7]=(m*R-g*T-v*A)*L,t[8]=(g*b-p*R+v*M)*L,t):null},i.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},t.exports=i},function(t,e,r){var n=r(15),i={};i.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.clone=function(t){var e=new n.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},i.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],f=e[7],c=e[8],h=e[9],l=e[10],d=e[11],g=e[12],p=e[13],m=e[14],v=e[15],M=r*s-n*a,A=r*u-i*a,R=r*f-o*a,E=n*u-i*s,b=n*f-o*s,T=i*f-o*u,x=c*p-h*g,F=c*m-l*g,y=c*v-d*g,_=h*m-l*p,P=h*v-d*p,w=l*v-d*m,L=M*w-A*P+R*_+E*y-b*F+T*x;return L?(L=1/L,t[0]=(s*w-u*P+f*_)*L,t[1]=(i*P-n*w-o*_)*L,t[2]=(p*T-m*b+v*E)*L,t[3]=(l*b-h*T-d*E)*L,t[4]=(u*y-a*w-f*F)*L,t[5]=(r*w-i*y+o*F)*L,t[6]=(m*R-g*T-v*A)*L,t[7]=(c*T-l*R+d*A)*L,t[8]=(a*P-s*y+f*x)*L,t[9]=(n*y-r*P-o*x)*L,t[10]=(g*b-p*R+v*M)*L,t[11]=(h*R-c*b-d*M)*L,t[12]=(s*F-a*_-u*x)*L,t[13]=(r*_-n*F+i*x)*L,t[14]=(p*A-g*E-m*M)*L,t[15]=(c*E-h*A+l*M)*L,t):null},i.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],f=e[7],c=e[8],h=e[9],l=e[10],d=e[11],g=e[12],p=e[13],m=e[14],v=e[15];return t[0]=s*(l*v-d*m)-h*(u*v-f*m)+p*(u*d-f*l),t[1]=-(n*(l*v-d*m)-h*(i*v-o*m)+p*(i*d-o*l)),t[2]=n*(u*v-f*m)-s*(i*v-o*m)+p*(i*f-o*u),t[3]=-(n*(u*d-f*l)-s*(i*d-o*l)+h*(i*f-o*u)),t[4]=-(a*(l*v-d*m)-c*(u*v-f*m)+g*(u*d-f*l)),t[5]=r*(l*v-d*m)-c*(i*v-o*m)+g*(i*d-o*l),t[6]=-(r*(u*v-f*m)-a*(i*v-o*m)+g*(i*f-o*u)),t[7]=r*(u*d-f*l)-a*(i*d-o*l)+c*(i*f-o*u),t[8]=a*(h*v-d*p)-c*(s*v-f*p)+g*(s*d-f*h),t[9]=-(r*(h*v-d*p)-c*(n*v-o*p)+g*(n*d-o*h)),t[10]=r*(s*v-f*p)-a*(n*v-o*p)+g*(n*f-o*s),t[11]=-(r*(s*d-f*h)-a*(n*d-o*h)+c*(n*f-o*s)),t[12]=-(a*(h*m-l*p)-c*(s*m-u*p)+g*(s*l-u*h)),t[13]=r*(h*m-l*p)-c*(n*m-i*p)+g*(n*l-i*h),t[14]=-(r*(s*m-u*p)-a*(n*m-i*p)+g*(n*u-i*s)),t[15]=r*(s*l-u*h)-a*(n*l-i*h)+c*(n*u-i*s),t},i.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],f=t[8],c=t[9],h=t[10],l=t[11],d=t[12],g=t[13],p=t[14],m=t[15],v=e*a-r*o,M=e*s-n*o,A=e*u-i*o,R=r*s-n*a,E=r*u-i*a,b=n*u-i*s,T=f*g-c*d,x=f*p-h*d,F=f*m-l*d,y=c*p-h*g,_=c*m-l*g,P=h*m-l*p;return v*P-M*_+A*y+R*F-E*x+b*T},i.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],l=e[9],d=e[10],g=e[11],p=e[12],m=e[13],v=e[14],M=e[15],A=r[0],R=r[1],E=r[2],b=r[3];return t[0]=A*n+R*s+E*h+b*p,t[1]=A*i+R*u+E*l+b*m,t[2]=A*o+R*f+E*d+b*v,t[3]=A*a+R*c+E*g+b*M,A=r[4],R=r[5],E=r[6],b=r[7],t[4]=A*n+R*s+E*h+b*p,t[5]=A*i+R*u+E*l+b*m,t[6]=A*o+R*f+E*d+b*v,t[7]=A*a+R*c+E*g+b*M,A=r[8],R=r[9],E=r[10],b=r[11],t[8]=A*n+R*s+E*h+b*p,t[9]=A*i+R*u+E*l+b*m,t[10]=A*o+R*f+E*d+b*v,t[11]=A*a+R*c+E*g+b*M,A=r[12],R=r[13],E=r[14],b=r[15],t[12]=A*n+R*s+E*h+b*p,t[13]=A*i+R*u+E*l+b*m,t[14]=A*o+R*f+E*d+b*v,t[15]=A*a+R*c+E*g+b*M,t},i.mul=i.multiply,i.translate=function(t,e,r){var n,i,o,a,s,u,f,c,h,l,d,g,p=r[0],m=r[1],v=r[2];return e===t?(t[12]=e[0]*p+e[4]*m+e[8]*v+e[12],t[13]=e[1]*p+e[5]*m+e[9]*v+e[13],t[14]=e[2]*p+e[6]*m+e[10]*v+e[14],t[15]=e[3]*p+e[7]*m+e[11]*v+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],l=e[9],d=e[10],g=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=f,t[7]=c,t[8]=h,t[9]=l,t[10]=d,t[11]=g,t[12]=n*p+s*m+h*v+e[12],t[13]=i*p+u*m+l*v+e[13],t[14]=o*p+f*m+d*v+e[14],t[15]=a*p+c*m+g*v+e[15]),t},i.scale=function(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.rotate=function(t,e,r,i){var o,a,s,u,f,c,h,l,d,g,p,m,v,M,A,R,E,b,T,x,F,y,_,P,w=i[0],L=i[1],S=i[2],B=Math.sqrt(w*w+L*L+S*S);return Math.abs(B)<n.EPSILON?null:(B=1/B,w*=B,L*=B,S*=B,o=Math.sin(r),a=Math.cos(r),s=1-a,u=e[0],f=e[1],c=e[2],h=e[3],l=e[4],d=e[5],g=e[6],p=e[7],m=e[8],v=e[9],M=e[10],A=e[11],R=w*w*s+a,E=L*w*s+S*o,b=S*w*s-L*o,T=w*L*s-S*o,x=L*L*s+a,F=S*L*s+w*o,y=w*S*s+L*o,_=L*S*s-w*o,P=S*S*s+a,t[0]=u*R+l*E+m*b,t[1]=f*R+d*E+v*b,t[2]=c*R+g*E+M*b,t[3]=h*R+p*E+A*b,t[4]=u*T+l*x+m*F,t[5]=f*T+d*x+v*F,t[6]=c*T+g*x+M*F,t[7]=h*T+p*x+A*F,t[8]=u*y+l*_+m*P,t[9]=f*y+d*_+v*P,t[10]=c*y+g*_+M*P,t[11]=h*y+p*_+A*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},i.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],f=e[8],c=e[9],h=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+f*n,t[5]=a*i+c*n,t[6]=s*i+h*n,t[7]=u*i+l*n,t[8]=f*i-o*n,t[9]=c*i-a*n,t[10]=h*i-s*n,t[11]=l*i-u*n,t},i.rotateY=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],f=e[8],c=e[9],h=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-f*n,t[1]=a*i-c*n,t[2]=s*i-h*n,t[3]=u*i-l*n,t[8]=o*n+f*i,t[9]=a*n+c*i,t[10]=s*n+h*i,t[11]=u*n+l*i,t},i.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],f=e[4],c=e[5],h=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+f*n,t[1]=a*i+c*n,t[2]=s*i+h*n,t[3]=u*i+l*n,t[4]=f*i-o*n,t[5]=c*i-a*n,t[6]=h*i-s*n,t[7]=l*i-u*n,t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotation=function(t,e,r){var i,o,a,s=r[0],u=r[1],f=r[2],c=Math.sqrt(s*s+u*u+f*f);return Math.abs(c)<n.EPSILON?null:(c=1/c,s*=c,u*=c,f*=c,i=Math.sin(e),o=Math.cos(e),a=1-o,t[0]=s*s*a+o,t[1]=u*s*a+f*i,t[2]=f*s*a-u*i,t[3]=0,t[4]=s*u*a-f*i,t[5]=u*u*a+o,t[6]=f*u*a+s*i,t[7]=0,t[8]=s*f*a+u*i,t[9]=u*f*a-s*i,t[10]=f*f*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},i.fromXRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromYRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromZRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotationTranslation=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,u=i+i,f=o+o,c=n*s,h=n*u,l=n*f,d=i*u,g=i*f,p=o*f,m=a*s,v=a*u,M=a*f;return t[0]=1-(d+p),t[1]=h+M,t[2]=l-v,t[3]=0,t[4]=h-M,t[5]=1-(c+p),t[6]=g+m,t[7]=0,t[8]=l+v,t[9]=g-m,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},i.fromRotationTranslationScale=function(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,f=o+o,c=a+a,h=i*u,l=i*f,d=i*c,g=o*f,p=o*c,m=a*c,v=s*u,M=s*f,A=s*c,R=n[0],E=n[1],b=n[2];return t[0]=(1-(g+m))*R,t[1]=(l+A)*R,t[2]=(d-M)*R,t[3]=0,t[4]=(l-A)*E,t[5]=(1-(h+m))*E,t[6]=(p+v)*E,t[7]=0,t[8]=(d+M)*b,t[9]=(p-v)*b,t[10]=(1-(h+g))*b,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},i.fromRotationTranslationScaleOrigin=function(t,e,r,n,i){var o=e[0],a=e[1],s=e[2],u=e[3],f=o+o,c=a+a,h=s+s,l=o*f,d=o*c,g=o*h,p=a*c,m=a*h,v=s*h,M=u*f,A=u*c,R=u*h,E=n[0],b=n[1],T=n[2],x=i[0],F=i[1],y=i[2];return t[0]=(1-(p+v))*E,t[1]=(d+R)*E,t[2]=(g-A)*E,t[3]=0,t[4]=(d-R)*b,t[5]=(1-(l+v))*b,t[6]=(m+M)*b,t[7]=0,t[8]=(g+A)*T,t[9]=(m-M)*T,t[10]=(1-(l+p))*T,t[11]=0,t[12]=r[0]+x-(t[0]*x+t[4]*F+t[8]*y),t[13]=r[1]+F-(t[1]*x+t[5]*F+t[9]*y),t[14]=r[2]+y-(t[2]*x+t[6]*F+t[10]*y),t[15]=1,t},i.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,f=r*a,c=n*a,h=n*s,l=i*a,d=i*s,g=i*u,p=o*a,m=o*s,v=o*u;return t[0]=1-h-g,t[1]=c+v,t[2]=l-m,t[3]=0,t[4]=c-v,t[5]=1-f-g,t[6]=d+p,t[7]=0,t[8]=l+m,t[9]=d-p,t[10]=1-f-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.frustum=function(t,e,r,n,i,o,a){var s=1/(r-e),u=1/(i-n),f=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(a+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*f,t[15]=0,t},i.perspective=function(t,e,r,n,i){var o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t},i.perspectiveFromFieldOfView=function(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),f=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-((a-s)*u*.5),t[9]=(i-o)*f*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},i.ortho=function(t,e,r,n,i,o,a){var s=1/(e-r),u=1/(n-i),f=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(a+o)*f,t[15]=1,t},i.lookAt=function(t,e,r,o){var a,s,u,f,c,h,l,d,g,p,m=e[0],v=e[1],M=e[2],A=o[0],R=o[1],E=o[2],b=r[0],T=r[1],x=r[2];return Math.abs(m-b)<n.EPSILON&&Math.abs(v-T)<n.EPSILON&&Math.abs(M-x)<n.EPSILON?i.identity(t):(l=m-b,d=v-T,g=M-x,p=1/Math.sqrt(l*l+d*d+g*g),l*=p,d*=p,g*=p,a=R*g-E*d,s=E*l-A*g,u=A*d-R*l,p=Math.sqrt(a*a+s*s+u*u),p?(p=1/p,a*=p,s*=p,u*=p):(a=0,s=0,u=0),f=d*u-g*s,c=g*a-l*u,h=l*s-d*a,p=Math.sqrt(f*f+c*c+h*h),p?(p=1/p,f*=p,c*=p,h*=p):(f=0,c=0,h=0),t[0]=a,t[1]=f,t[2]=l,t[3]=0,t[4]=s,t[5]=c,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=g,t[11]=0,t[12]=-(a*m+s*v+u*M),t[13]=-(f*m+c*v+h*M),t[14]=-(l*m+d*v+g*M),t[15]=1,t)},i.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},t.exports=i},function(t,e,r){var n=r(15),i=r(18),o=r(21),a=r(22),s={};s.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(n,i,a){var u=o.dot(i,a);return-.999999>u?(o.cross(t,e,i),o.length(t)<1e-6&&o.cross(t,r,i),o.normalize(t,t),s.setAxisAngle(n,t,Math.PI),n):u>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(t,i,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+u,s.normalize(n,n))}}(),s.setAxes=function(){var t=i.create();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=a.clone,s.fromValues=a.fromValues,s.copy=a.copy,s.set=a.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,r){r=.5*r;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t},s.add=a.add,s.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],f=r[2],c=r[3];return t[0]=n*c+a*s+i*f-o*u,t[1]=i*c+a*u+o*s-n*f,t[2]=o*c+a*f+n*u-i*s,t[3]=a*c-n*s-i*u-o*f,t},s.mul=s.multiply,s.scale=a.scale,s.rotateX=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-n*s,t},s.rotateY=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-o*s,t[1]=i*u+a*s,t[2]=o*u+n*s,t[3]=a*u-i*s,t},s.rotateZ=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=i*u-n*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},s.calculateW=function(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t},s.dot=a.dot,s.lerp=a.lerp,s.slerp=function(t,e,r,n){var i,o,a,s,u,f=e[0],c=e[1],h=e[2],l=e[3],d=r[0],g=r[1],p=r[2],m=r[3];return o=f*d+c*g+h*p+l*m,0>o&&(o=-o,d=-d,g=-g,p=-p,m=-m),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-n)*i)/a,u=Math.sin(n*i)/a):(s=1-n,u=n),t[0]=s*f+u*d,t[1]=s*c+u*g,t[2]=s*h+u*p,t[3]=s*l+u*m,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(r,n,i,o,a,u){return s.slerp(t,n,a,u),s.slerp(e,i,o,u),s.slerp(r,t,e,2*u*(1-u)),r}}(),s.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=o*s,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=a.length,s.len=s.length,s.squaredLength=a.squaredLength,s.sqrLen=s.squaredLength,s.normalize=a.normalize,s.fromMat3=function(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*o+a]-e[3*a+o])*r,t[o]=(e[3*o+i]+e[3*i+o])*r,t[a]=(e[3*a+i]+e[3*i+a])*r}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=s},function(t,e,r){var n=r(15),i={};i.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},i.fromValues=function(t,e,r){var i=new n.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=r,i},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},i.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},i.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},i.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},i.sub=i.subtract,i.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},i.mul=i.multiply,i.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},i.div=i.divide,i.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},i.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},i.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},i.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},i.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)},i.dist=i.distance,i.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},i.len=i.length,i.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},i.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},i.cross=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=i*u-o*s,t[1]=o*a-n*u,t[2]=n*s-i*a,t},i.lerp=function(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t},i.hermite=function(t,e,r,n,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,f=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+r[0]*u+n[0]*f+i[0]*c,t[1]=e[1]*s+r[1]*u+n[1]*f+i[1]*c,t[2]=e[2]*s+r[2]*u+n[2]*f+i[2]*c,t},i.bezier=function(t,e,r,n,i,o){var a=1-o,s=a*a,u=o*o,f=s*a,c=3*o*s,h=3*u*a,l=u*o;return t[0]=e[0]*f+r[0]*c+n[0]*h+i[0]*l,t[1]=e[1]*f+r[1]*c+n[1]*h+i[1]*l,t[2]=e[2]*f+r[2]*c+n[2]*h+i[2]*l,t},i.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI,i=2*n.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=i*e,t},i.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t},i.transformMat3=function(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t},i.transformQuat=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],f=r[3],c=f*n+s*o-u*i,h=f*i+u*n-a*o,l=f*o+a*i-s*n,d=-a*n-s*i-u*o;return t[0]=c*f+d*-a+h*-u-l*-s,t[1]=h*f+d*-s+l*-a-c*-u,t[2]=l*f+d*-u+c*-s-h*-a,t},i.rotateX=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},i.rotateY=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},i.rotateZ=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},i.forEach=function(){var t=i.create();return function(e,r,n,i,o,a){var s,u;for(r||(r=3),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;u>s;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),i.angle=function(t,e){var r=i.fromValues(t[0],t[1],t[2]),n=i.fromValues(e[0],e[1],e[2]);i.normalize(r,r),i.normalize(n,n);var o=i.dot(r,n);return o>1?0:Math.acos(o)},i.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},t.exports=i},function(t,e,r){var n=r(15),i={};i.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.fromValues=function(t,e,r,i){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=i,o},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},i.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},i.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},i.sub=i.subtract,i.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},i.mul=i.multiply,i.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},i.div=i.divide,i.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},i.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},i.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},i.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},i.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)},i.dist=i.distance,i.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)},i.len=i.length,i.squaredLength=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},i.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},i.lerp=function(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=s+n*(r[3]-s),t},i.random=function(t,e){return e=e||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),i.normalize(t,t),i.scale(t,t,e),t},i.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t},i.transformQuat=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],f=r[3],c=f*n+s*o-u*i,h=f*i+u*n-a*o,l=f*o+a*i-s*n,d=-a*n-s*i-u*o;return t[0]=c*f+d*-a+h*-u-l*-s,t[1]=h*f+d*-s+l*-a-c*-u,t[2]=l*f+d*-u+c*-s-h*-a,t[3]=e[3],t},i.forEach=function(){var t=i.create();return function(e,r,n,i,o,a){var s,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;u>s;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),i.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=i},function(t,e,r){var n=r(15),i={};i.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},i.fromValues=function(t,e){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},i.set=function(t,e,r){return t[0]=e,t[1]=r,t},i.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},i.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},i.sub=i.subtract,i.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},i.mul=i.multiply,i.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},i.div=i.divide,i.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},i.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},i.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},i.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},i.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},i.dist=i.distance,i.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},i.len=i.length,i.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},i.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},i.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},i.lerp=function(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t},i.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},i.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},i.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},i.transformMat3=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},i.transformMat4=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},i.forEach=function(){var t=i.create();return function(e,r,n,i,o,a){var s,u;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;u>s;s+=r)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}(),i.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},t.exports=i},function(t,e,r){var n=r(9).Buffer,i=function(t,e,r,n,i,o){this.numVertices=t,this.drawMode=e,this.buffers={},this.createBuffer("vertex",t,3,r),n&&this.createBuffer("color",t,4,n),i&&this.createBuffer("normal",t,3,i),o&&this.createBuffer("texCoord",t,2,o)};i.prototype.createBuffer=function(t,e,r,i){this.buffers[t]=new n(e,r,i),this[t+"Buffer"]=this.buffers[t]},i.prototype.associate=function(t){for(var e in this.buffers){var r=this.buffers[e],n="a"+e.charAt(0).toUpperCase()+e.slice(1),i=t.getAttribute(n);i||console.error("Could not associate "+n+" attribute"),r.associate(i)}},i.prototype.render=function(t,e){null==e&&(e=this.numVertices),gl.drawArrays(this.drawMode,t||0,e)},e.Mesh=i},function(t,e,r){var n=r(24).Mesh,i=function(t,e,r,i,o,a){n.call(this,4,gl.TRIANGLE_STRIP,r,i,o,a),this.vertexBuffer.setValues([0,0,0,0,e,0,t,0,0,t,e,0]),a&&this.texCoordBuffer.setValues([0,1,0,0,1,1,1,0])};i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.RectMesh=i},function(t,e,r){var n=r(14),i=n.vec3,o=n.quat,a=n.mat4,s=function(){this.position=i.create(),this.rotation=o.create(),this.scale=i.create(),i.set(this.scale,1,1,1)};s.prototype.apply=function(t){a.fromRotationTranslation(t,this.rotation,this.position),a.scale(t,t,this.scale)},e.Transformation=s}]);
//# sourceMappingURL=video-scroll.0.2.0.min.js.map